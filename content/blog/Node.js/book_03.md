# 3. 노드 기능 알아보기
## 1. REPL 사용
- 스크립트 언어 -> 컴파일 필요 없이 코드 실행
- 노드에서 제공하는 콘솔(REPL. Read Eval Print Loop)

## 2. JS파일 실행
## 3. 모듈로 만들기
- 모듈: 특정한 기능을 하는 변수나 함수들의 집합
- require, module.exports 이용
- **브라우저에서는?** 모듈은 브라우저의 자바스크립에는 구현되지 않는 노드만의 형식이었으나 크롬60부터는 브라우저에서도 가능해짐
- **ES2015부터** 자바스크립트 자체 모듈시스템 문법이 생김.
  - 노드에서도 9버전부터 확장자를 mjs로 바꾸거나 js로 쓰면서 package.json에 'type:module' 써서 ES2015의 모듈시스템 이용 가능
  - require -> import, module.exports -> export 로 바꾸는 것만으로는 제대로 동작하지 않을 수도 있다. (동작하는 경우도 있음)
    - 그럼 어떻게 바꿔야할까?????

## 4. 노드 내장 객체 알아보기
### 1. global
- 브라우저의 window와 같은 전역객체
  - 예) require, console도 모두 global.require, glabal.console 
- 전역객체이기에 남용하면 프로그램 규모 커질수록 어떤 파일에서 global객체에 값 대입했는지 알기 힘들다. 즉 유지보수 어려움. 
  - 다른 파일의 값을 사용 원한다면 모듈 형식 사용                

### 2. console 
- console.dir는 console.log와 달리 객체 구조 잘 표현                        

### 3. 타이머 (global에 있음)
- setTimeout(콜백, 시간), setInterval(콜백, 시간), setImmediate(콜백)는 ID를 반환하고, 이 ID를 통해 타이머 취소 가능(clearTimeout, clearInterval, clearImmediate)
- setImmediate(콜백)와 setTimeout(콜백, 0)의 차이?
  - 둘다 콜백함수는 이벤트 루프를 거친 뒤 즉시 실행. 단, 파일 시스템 접근, 네트워킹 같은 I/O 작업의 콜백함수를 호출하는 경우에는 setImmediate이 setTimeout보다 먼저 실행. 하지만 항상 그런 것은 아니므로 setTimeout(콜백, 0)은 사용 안하는 것 권장

### 4. __filemname, __dirname
- 현재의 파일명과 파일 경로/ path모듈과 주로 함께 사용

### 5. module, exports, require

### 6. process
- process.env: dotenv와 함께 사용
- process.nextTick: 이벤트 루프가 다른 콜백함수보다 **nextTick의 콜백함수를 우선적으로 처리하게 함**
    - microTask: process.nextTick, resolve된 프로미스 등. 
- process.exit: 실행 중인 노드프로세서를 종료
  - 0 혹은 번호 없음: 정상 종료/ 1: 비정상 종료

## 5. 노드 내장 모듈 사용하기
### 1. os
- 브라우저와 달리 노드는 os 모듈에 운영체제의 정보가 담겨있어서 그것을 가져올 수 있다.
- 일반적인 웹서비스 제작시에는 사용 빈도 적고, 운영체제별로 다른 서비스의 적용 등 컴퓨터 내부 자원에 빈번하게 접근하는 경우 사용

### 2. path
- 폴더와 파일의 경로를 쉽게 조작하도록 도와주는 모듈(운영체제별로 경로 구분자(맥 /, 윈도우 \)가 다르기 때문에 유용

### 3. url
**추가보충하기**


## 6. 파일 시스템 접근하기
- 브라우저와 달리 파일 CRUD
- fs.readFile('경로', 콜백함수)의 결과:  Buffer(메모리의 데이터)로 나오고 toString()하면 읽을 수 있는 메세지 나옴

### 1. 동기 메서드와 비동기 메서드
- 노드는 대부분의 메서드를 비동기 방식으로 처리. 하지만 일부 메서드는 동기로 처리도 가능
- 노드에서는 동기-블로킹, 비동기-논블로킹 방식으로 사용되는 것이 대부분
  - 동기,비동기: 백그라운드의 작업 완료를 계속 확인
  - 블로킹, 논블로킹: 함수가 바로 리턴되는지
    - 동기, 블로킹: 백그라운드 작업 완료 계속 확인 & 호출한 함수가 바로 리턴되지 않고, 백그라운드 끝날 때까지 기다림
    - 비동기, 논블로킹: 호출한 함수가 바로 리턴되어 다음 작업으로 넘어감 & 백그라운드 작업 완료 여부는 나중에 백그라운드가 알림 주면 그 때 처리
- readFileSync, writeFileSync로 동기로 쓸 수도 있지만, 이러면 블로킹이 되기에 잘 사용하지 않는다.

### 2. 버퍼와 스트림 이해하기
- **buffer**: 메모리에 파일 크기만큼 공간을 마련해두고, 그 메모리에 저장한 파일 데이터
  - 모든 내용을 버퍼에 다 쓴 후에야 다음 동작이 가능하므로 파일 읽기, 압축, 쓰기 등의 조작 연달아할 때는 매번 전체용량을 버퍼로 처리해야 다음 단계로 갈 수 있음
- **stream**: 버퍼를 작게 만들어서 작은 메모리에 여러 번에 걸쳐 전달. 그렇게 나눠진 조각은 **chunk**
  - piping: 스트림끼리 연결하는 것

## 7. 이벤트 이해하기 
- on: 이벤트 이름과 이벤트 발생시의 콜백을 연결. 이렇게 연결하는 동작을 이벤트 리스닝이라고 함
- emit: 이벤트를 호출하는 메서드

**출처**
- 조현영, Node.js 교과서(2021, 길벗)
  